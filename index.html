<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nex - Willkommen</title>
    <style>
        /* Grundlegende Stile (Original-Look beibehalten) */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0;
            background-color: #f5f5f7;
            color: #1d1d1f;
            overflow-x: hidden;
        }

        /* Navigation */
        .nav-container {
            background-color: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-bottom: 1px solid #ddd;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 980px;
            margin: 0 auto;
            padding: 0 22px;
            height: 44px;
            font-size: 12px;
        }

        .nav-links {
            display: flex;
            gap: 2em;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: #1d1d1f;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #0071e3;
        }
        
        .nav-logo, .nav-bag {
            font-weight: 600;
        }

        /* Hero-Sektion (Startseite) - so nah wie möglich am Original */
        .hero-section {
            text-align: center;
            padding: 100px 20px;
            background-color: #fff;
        }

        .hero-section .eyebrow {
            color: #bf4800;
            font-size: 17px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .hero-section .headline {
            font-size: 56px;
            font-weight: 700;
            margin-bottom: 10px;
            letter-spacing: -0.005em;
        }

        .hero-section .subheadline {
            font-size: 28px;
            font-weight: 400;
            margin-bottom: 20px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        
        .hero-section .tagline {
            font-size: 21px;
            color: #86868b;
            margin-top: 25px;
        }

        .cta-links a {
            font-size: 17px;
            text-decoration: none;
            color: #0071e3;
            margin: 0 15px;
            transition: text-decoration 0.3s;
        }
        .cta-links a:hover {
            text-decoration: underline;
        }
        .cta-links .button {
            background-color: #0071e3;
            color: white;
            padding: 11px 21px;
            border-radius: 980px;
        }
        .cta-links .button:hover {
            background-color: #0077ed;
            text-decoration: none;
        }

        .hero-image {
            margin-top: 60px;
        }

        .hero-image img, .hero-image svg {
            max-width: 100%;
            height: auto;
            max-height: 500px;
        }

        /* Produkt-Highlights */
        .product-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        .product-tile {
            background-color: #fff;
            text-align: center;
            padding: 60px 20px;
            border-radius: 20px;
        }
        
        .product-tile .headline {
            font-size: 40px;
            font-weight: 600;
            margin: 0;
        }

        .product-tile .subheadline {
            font-size: 21px;
            margin: 10px 0 20px 0;
        }

        .product-tile .price-tag {
            font-size: 20px;
            font-weight: 700;
            margin-top:10px;
        }

        .product-tile .product-art {
            margin-top: 20px;
        }

        .product-tile svg { width: 60%; height: auto; }

        /* Bestell-Seite */
        .order-page {
            display: none; /* Wird per JS angezeigt */
            background-color: #fff;
            padding: 60px 20px;
            max-width: 980px;
            margin: 40px auto;
            border-radius: 20px;
        }

        .order-header {
            text-align: center;
            border-bottom: 1px solid #ddd;
            padding-bottom: 30px;
            margin-bottom: 40px;
        }

        .order-header h1 {
            font-size: 40px;
            margin: 0;
        }

        .config-section {
            margin-bottom: 40px;
        }
        
        .config-section h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .option-box-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
        }
        
        .option-box {
            border: 1px solid #ccc;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option-box.selected {
            border-color: #0071e3;
            border-width: 2px;
            box-shadow: 0 0 0 2px #0071e3;
        }
        .option-box:hover {
            border-color: #888;
        }

        .option-box .model-name {
            font-size: 17px;
            font-weight: 600;
        }
        .option-box .model-desc {
            font-size: 14px;
            color: #86868b;
        }
        .option-box .price {
            margin-top: 10px;
            font-size: 12px;
            color: #555;
        }

        .final-price {
            text-align: right;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 1px solid #ddd;
        }

        .final-price .total {
            font-size: 32px;
            font-weight: 700;
        }
        
        .add-to-bag-button {
            display: block;
            width: 100%;
            background-color: #0071e3;
            color: white;
            border: none;
            padding: 18px;
            border-radius: 12px;
            font-size: 17px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: background-color 0.3s;
        }
        .add-to-bag-button:hover {
            background-color: #0077ed;
        }

        /* Zahlungs-Auswahl Styles */
        .payment-options {display:flex;gap:12px;flex-wrap:wrap}
        .pay-option {padding:12px 16px;border-radius:10px;border:1px solid #ddd;cursor:pointer}
        .pay-option.selected {border-color:#0071e3;box-shadow:0 6px 18px rgba(0,113,227,0.08)}

        /* Footer */
        .footer {
            background-color: #f5f5f7;
            color: #6e6e73;
            font-size: 12px;
            padding: 40px 20px;
            text-align: center;
        }
        
        .footer-content {
            max-width: 980px;
            margin: 0 auto;
        }

        /* Responsivität */
        @media (max-width: 768px) {
            .nav-links { display: none; }
            .hero-section .headline { font-size: 36px; }
            .hero-section .subheadline { font-size: 20px; }
            .product-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>

    <header class="nav-container">
        <nav class="nav">
            <div class="nav-logo">Nex</div>
            <ul class="nav-links">
                <li><a href="#home">Store</a></li>
                <li><a href="#nexphone">NexPhone</a></li>
                <li><a href="#nexpad">NexPad</a></li>
                <li><a href="#support">Support</a></li>
            </ul>
            <div class="nav-bag" id="nav-bag">Bag</div>
        </nav>
    </header>

    <main id="main-content">

        <section class="hero-section" id="home">
            <div class="eyebrow">NexPhone 6</div>
            <h1 class="headline">Built for NexAI.</h1>
            <h2 class="subheadline">Das leistungsstärkste Phone, das wir je entwickelt haben. Mit der Power von NexAI in deiner Hand.</h2>
            <div class="tagline">Ab 149,99 €</div>
            <div class="cta-links">
                <a href="#" class="button" id="buy-button">Jetzt kaufen</a>
                <a href="#nexphone">Mehr erfahren &gt;</a>
            </div>
            <div class="hero-image">
                <!-- Platzhalter SVG anstelle echter Fotos -->
                <svg viewBox="0 0 640 360" role="img" aria-label="NexPhone Platzhalter" xmlns="http://www.w3.org/2000/svg">
                    <rect width="100%" height="100%" rx="10" fill="#fff" stroke="#e6eefc"/>
                    <g transform="translate(40,40)">
                        <rect x="0" y="0" width="140" height="280" rx="18" fill="#f2f9ff"/>
                        <rect x="200" y="0" width="360" height="280" rx="18" fill="#fbfbfd"/>
                    </g>
                </svg>
            </div>
        </section>

        <div class="product-grid">
            <div class="product-tile" id="nexphone">
                <h2 class="headline">NexPhone 6 Plus</h2>
                <p class="subheadline">Größer. Stärker. Länger.</p>
                <div class="price-tag">Ab 149,99 €</div>
                <div class="cta-links" style="margin-top:18px">
                    <a href="#" class="button" data-product="nexphone-6">Kaufen</a>
                    <a href="#">Mehr erfahren &gt;</a>
                </div>
                <div class="product-art">
                    <!-- Platzhalter-SVG -->
                    <svg viewBox="0 0 300 220" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" rx="14" fill="#f7fbff"/>
                        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="16" fill="#1e3f8a">NexPhone 6</text>
                    </svg>
                </div>
            </div>
            <div class="product-tile" id="nexpad">
                <h2 class="headline">NexPad 8</h2>
                <p class="subheadline">Dein mobiles Büro. Neu definiert.</p>
                <div class="price-tag">Ab 169,99 €</div>
                <div class="cta-links" style="margin-top:18px">
                    <a href="#" class="button" data-product="nexpad-8">Kaufen</a>
                    <a href="#">Mehr erfahren &gt;</a>
                </div>
                <div class="product-art">
                    <svg viewBox="0 0 300 220" xmlns="http://www.w3.org/2000/svg">
                        <rect width="100%" height="100%" rx="14" fill="#f6fff7"/>
                        <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="16" fill="#127a3a">NexPad 8</text>
                    </svg>
                </div>
            </div>
        </div>

        <section class="order-page" id="order-section">
            <div class="order-header">
                <h1>Kaufe dein Nex</h1>
            </div>

            <div class="config-section">
                <h2>Wähle dein Modell.</h2>
                <div class="option-box-container" id="model-options">
                    <div class="option-box selected" data-id="nexphone-6" data-price="149.99">
                        <div class="model-name">NexPhone 6</div>
                        <div class="model-desc">6,1" Display</div>
                        <div class="price">Ab 149,99 €</div>
                    </div>
                    <div class="option-box" data-id="nexphone-6-plus" data-price="199.99">
                        <div class="model-name">NexPhone 6 Plus</div>
                        <div class="model-desc">6,7" Display</div>
                        <div class="price">Ab 199,99 €</div>
                    </div>
                    <div class="option-box" data-id="nexpad-8" data-price="169.99">
                        <div class="model-name">NexPad 8</div>
                        <div class="model-desc">8" Tablet</div>
                        <div class="price">Ab 169,99 €</div>
                    </div>
                </div>
            </div>

            <div class="config-section">
                <h2>Wähle deine Farbe.</h2>
                 <div class="option-box-container" id="color-options">
                    <div class="option-box selected" data-price="0">
                        <div class="model-name">Titan Natur</div>
                    </div>
                    <div class="option-box" data-price="0">
                        <div class="model-name">Titan Blau</div>
                    </div>
                     <div class="option-box" data-price="0">
                        <div class="model-name">Titan Schwarz</div>
                    </div>
                </div>
            </div>
            
            <div class="config-section">
                <h2>Wähle deinen Speicher.</h2>
                 <div class="option-box-container" id="storage-options">
                    <div class="option-box selected" data-price="0" data-storage="256">
                        <div class="model-name">256 GB</div>
                        <div class="price">Standard</div>
                    </div>
                    <div class="option-box" data-price="50" data-storage="512">
                        <div class="model-name">512 GB</div>
                        <div class="price">+ 50 €</div>
                    </div>
                     <div class="option-box" data-price="100" data-storage="1024">
                        <div class="model-name">1 TB</div>
                        <div class="price">+ 100 €</div>
                    </div>
                </div>
            </div>

            <div class="config-section">
                <h2>Lieferadresse</h2>
                <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;">
                    <input id="firstName" placeholder="Vorname" required />
                    <input id="lastName" placeholder="Nachname" required />
                    <input id="street" placeholder="Straße, Nr." required style="grid-column:1 / -1" />
                    <input id="zip" placeholder="PLZ" />
                    <input id="city" placeholder="Ort" />
                    <select id="country"><option>Deutschland</option><option>Österreich</option><option>Schweiz</option><option>Andere</option></select>
                    <input id="email" placeholder="E-Mail" style="grid-column:1 / -1" />
                </div>
            </div>

            <div class="config-section">
                <h2>Zahlung</h2>
                <div class="payment-options" id="payment-options">
                    <div class="pay-option selected" data-pay="paypal">PayPal</div>
                    <div class="pay-option" data-pay="card">Kreditkarte</div>
                    <div class="pay-option" data-pay="bank">Vorkasse (Banküberweisung)</div>
                </div>
            </div>

            <div class="final-price">
                <div class="total" id="total-price">149,99 €</div>
                <button class="add-to-bag-button" id="checkout-button">Bezahlen</button>
            </div>
        </section>

    </main>

    <footer class="footer">
        <div class="footer-content">
            <p>
                Die Preise beinhalten die Mehrwertsteuer und sonstige Preisbestandteile.
            </p>
            <p>
                Copyright © 2025 Nex Inc. Alle Rechte vorbehalten.
            </p>
            <p>
                Datenschutzrichtlinie | Nutzungsbedingungen | Verkauf und Rückerstattung | Impressum
            </p>
        </div>
    </footer>
    
    <!-- jsPDF Bibliothek für PDF-Rechnung -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <script>
        // --- Initiale Einstellungen ---
        document.addEventListener('DOMContentLoaded', function() {
            const buyButtons = document.querySelectorAll('[data-product]');
            const orderSection = document.getElementById('order-section');
            const mainContent = document.getElementById('main-content');
            const totalPriceElement = document.getElementById('total-price');

            // Produkt-Preise (IDs)
            const PRODUCT_BASE = {
                'nexphone-6': 149.99,
                'nexphone-6-plus': 199.99,
                'nexpad-8': 169.99
            };

            // Helfer: Preisformat
            const fmt = (v) => new Intl.NumberFormat('de-DE', { style: 'currency', currency: 'EUR' }).format(v);

            // Standard ausgewähltes Modell
            let selectedModel = 'nexphone-6';
            let selectedModelPrice = PRODUCT_BASE[selectedModel];
            let selectedStorageDelta = 0;
            let selectedColorPrice = 0;
            let selectedQty = 1;
            let selectedPayment = 'paypal';

            // Öffne Bestellseite wenn "Kaufen" gedrückt wird
            buyButtons.forEach(btn => btn.addEventListener('click', (e) => {
                e.preventDefault();
                const pid = btn.dataset.product;
                // wähle das entsprechende Modell in der Order-Section
                const modelBoxes = document.querySelectorAll('#model-options .option-box');
                modelBoxes.forEach(b => b.classList.remove('selected'));
                const target = Array.from(modelBoxes).find(b => b.dataset.id === pid) || modelBoxes[0];
                target.classList.add('selected');
                selectedModel = target.dataset.id || selectedModel;
                selectedModelPrice = PRODUCT_BASE[selectedModel] || selectedModelPrice;
                // verberge Startseite-Abschnitte wie gewünscht
                for (let child of mainContent.children) {
                    if (child.id !== 'order-section') child.style.display = 'none';
                }
                orderSection.style.display = 'block';
                window.scrollTo(0, 0);
                updateTotalPrice();
            }));

            // Klick-Events für Modell-Optionen
            document.querySelectorAll('#model-options .option-box').forEach(box => {
                box.addEventListener('click', () => {
                    document.querySelectorAll('#model-options .option-box').forEach(s => s.classList.remove('selected'));
                    box.classList.add('selected');
                    selectedModel = box.dataset.id;
                    selectedModelPrice = PRODUCT_BASE[selectedModel] || parseFloat(box.dataset.price) || selectedModelPrice;
                    updateTotalPrice();
                });
            });

            // Storage & color options
            document.querySelectorAll('#storage-options .option-box').forEach(box => {
                box.addEventListener('click', () => {
                    document.querySelectorAll('#storage-options .option-box').forEach(s => s.classList.remove('selected'));
                    box.classList.add('selected');
                    selectedStorageDelta = parseFloat(box.dataset.price) || 0;
                    updateTotalPrice();
                });
            });
            document.querySelectorAll('#color-options .option-box').forEach(box => {
                box.addEventListener('click', () => {
                    document.querySelectorAll('#color-options .option-box').forEach(s => s.classList.remove('selected'));
                    box.classList.add('selected');
                    selectedColorPrice = parseFloat(box.dataset.price) || 0;
                    updateTotalPrice();
                });
            });

            // Payment options
            document.querySelectorAll('.pay-option').forEach(po => {
                po.addEventListener('click', () => {
                    document.querySelectorAll('.pay-option').forEach(x => x.classList.remove('selected'));
                    po.classList.add('selected');
                    selectedPayment = po.dataset.pay;
                });
            });

            // Update Preis-Label
            function updateTotalPrice() {
                const total = (selectedModelPrice + selectedStorageDelta + selectedColorPrice) * selectedQty;
                totalPriceElement.textContent = fmt(total);
            }

            updateTotalPrice();

            // Checkout / Fake-Zahlungsablauf
            const checkoutButton = document.getElementById('checkout-button');
            checkoutButton.addEventListener('click', async () => {
                // Validierung: einfache Prüfungen
                const fn = document.getElementById('firstName').value.trim();
                const ln = document.getElementById('lastName').value.trim();
                const mail = document.getElementById('email').value.trim();
                if (!fn || !ln || !mail) { alert('Bitte Vorname, Nachname und E-Mail ausfüllen.'); return; }

                // Berechne Endbetrag
                const amount = (selectedModelPrice + selectedStorageDelta + selectedColorPrice) * selectedQty;

                // Fake payment flow — simuliert Zahlungsprozesse
                if (selectedPayment === 'paypal') {
                    if (!confirm('Du hast PayPal gewählt. Weiter zur Fake‑Bezahlung?')) return;
                    // Simuliere Weiterleitung + Erfolg
                    await fakeProcessing('PayPal');
                } else if (selectedPayment === 'card') {
                    if (!confirm('Du hast Kreditkarte gewählt. Test Zahlung ausführen?')) return;
                    await fakeProcessing('Kreditkarte');
                } else {
                    if (!confirm('Du hast Vorkasse gewählt. Bestellung als bezahlt markieren?')) return;
                    await fakeProcessing('Vorkasse');
                }

                // Nach erfolgreicher (simulierter) Zahlung: Rechnung erzeugen
                const order = buildOrderObject();
                generateInvoicePdf(order);

                // Zeige Bestätigungsseite / Nachricht
                alert('Zahlung abgeschlossen. Die Rechnung wurde als PDF heruntergeladen.');

                // Optional: leere Auswahl / zurück zur Startseite
                for (let child of mainContent.children) {
                    child.style.display = '';
                }
                orderSection.style.display = 'none';
            });

            function fakeProcessing(method) {
                return new Promise((res) => {
                    // Einfacher Lade-Indikator
                    const old = checkoutButton.textContent;
                    checkoutButton.textContent = 'Bezahlung wird verarbeitet...';
                    checkoutButton.disabled = true;
                    setTimeout(() => {
                        checkoutButton.textContent = old;
                        checkoutButton.disabled = false;
                        res();
                    }, 1400);
                });
            }

            function buildOrderObject() {
                const firstName = document.getElementById('firstName').value;
                const lastName = document.getElementById('lastName').value;
                const street = document.getElementById('street').value;
                const zip = document.getElementById('zip').value;
                const city = document.getElementById('city').value;
                const country = document.getElementById('country').value;
                const email = document.getElementById('email').value;

                const modelBox = document.querySelector('#model-options .option-box.selected');
                const storageBox = document.querySelector('#storage-options .option-box.selected');
                const colorBox = document.querySelector('#color-options .option-box.selected');

                const modelName = modelBox ? modelBox.querySelector('.model-name').textContent : 'NexPhone 6';
                const storage = storageBox ? storageBox.dataset.storage || '256' : '256';
                const color = colorBox ? colorBox.querySelector('.model-name').textContent : 'Titan Natur';

                const unitPrice = selectedModelPrice + selectedStorageDelta + selectedColorPrice;
                const qty = selectedQty;
                const sub = unitPrice * qty;

                return {
                    orderId: 'NX-' + Date.now(),
                    createdAt: new Date().toISOString(),
                    customer: { firstName, lastName, street, zip, city, country, email },
                    items: [{ name: modelName + ' (' + storage + 'GB, ' + color + ')', qty, unitPrice, lineTotal: sub }],
                    paymentMethod: selectedPayment,
                    totals: { subtotal: sub, shipping: 0, total: sub }
                };
            }

            // PDF mit jsPDF erzeugen
            async function generateInvoicePdf(order) {
                try {
                    const { jsPDF } = window.jspdf;
                    const doc = new jsPDF();
                    let y = 20;
                    doc.setFontSize(16); doc.text('Nex Inc. — Rechnung', 14, y); y += 10;
                    doc.setFontSize(10); doc.text('Rechnungsnr: ' + order.orderId, 14, y); doc.text('Datum: ' + new Date(order.createdAt).toLocaleString('de-DE'), 140, y); y += 12;

                    doc.setFontSize(11); doc.text('Rechnung an:', 14, y); y += 7;
                    doc.setFontSize(10); doc.text(order.customer.firstName + ' ' + order.customer.lastName, 14, y); y += 6;
                    doc.text(order.customer.street, 14, y); y += 6;
                    doc.text(order.customer.zip + ' ' + order.customer.city, 14, y); y += 12;

                    doc.setFontSize(12); doc.text('Positionen:', 14, y); y += 8;
                    order.items.forEach(it => {
                        doc.setFontSize(10); doc.text(it.name, 14, y); doc.text(it.qty + ' × ' + fmt(it.unitPrice), 140, y); doc.text(fmt(it.lineTotal), 170, y);
                        y += 8;
                    });
                    y += 6;
                    doc.setFontSize(11); doc.text('Gesamt: ' + fmt(order.totals.total), 14, y);

                    const filename = 'rechnung-' + order.orderId + '.pdf';
                    doc.save(filename);
                } catch (err) {
                    console.error('PDF Fehler', err);
                    alert('Fehler beim Erstellen der Rechnung: ' + err.message);
                }
            }

        });
    </script>

</body>
</html>
