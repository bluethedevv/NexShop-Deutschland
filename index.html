<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NexShop — Komplett (All‑in‑1)</title>
  <meta name="description" content="NexShop — Single HTML demo: Produktseite, Warenkorb, Checkout, Rechnung (PDF), Bestell-Export — keine Fremdbilder" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#f6f7fb;--card:#fff;--muted:#6b7280;--accent:#0066dd;--accent-strong:#004bb5;--radius:14px;}
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;background:linear-gradient(180deg,var(--bg),#eef2f7 140%);color:#071133}
    .wrap{max-width:1100px;margin:28px auto;padding:0 20px}
    header{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:18px}
    .logo{display:flex;align-items:center;gap:12px}
    .brandbox{width:46px;height:46px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-strong));display:flex;align-items:center;justify-content:center;color:white;font-weight:800}
    nav a{color:var(--muted);text-decoration:none;margin-right:12px;font-size:14px}
    .btn{background:var(--accent);color:white;padding:10px 14px;border-radius:10px;border:0;cursor:pointer;font-weight:700}
    .btn.ghost{background:transparent;color:var(--accent);border:1px solid rgba(0,102,221,0.12)}

    .hero{display:grid;grid-template-columns:1fr 380px;gap:20px;padding:22px;background:var(--card);border-radius:16px;box-shadow:0 10px 30px rgba(6,20,40,0.05)}
    .pill{background:rgba(0,102,221,0.08);padding:8px 12px;border-radius:999px;display:inline-block;font-weight:700;color:var(--accent)}

    .grid{display:grid;grid-template-columns:repeat(2,1fr);gap:16px;margin-top:18px}
    .card{background:var(--card);padding:16px;border-radius:12px;display:flex;gap:14px;align-items:center;box-shadow:0 8px 20px rgba(10,15,30,0.03)}
    .thumb{width:100px;height:100px;border-radius:10px;display:flex;align-items:center;justify-content:center;background:#fbfcff}
    .title{font-weight:800;margin:0}
    .desc{color:var(--muted);margin:6px 0}
    .price{font-weight:800}

    .checkout{display:grid;grid-template-columns:1fr 360px;gap:18px;margin-top:20px}
    .form{background:var(--card);padding:14px;border-radius:12px}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(10,15,30,0.06);margin-top:6px}

    .summary{background:linear-gradient(180deg,rgba(0,102,221,0.06),transparent);padding:16px;border-radius:12px}
    .muted{color:var(--muted)}

    .cart-drawer{position:fixed;right:18px;bottom:18px;width:360px;background:var(--card);border-radius:12px;box-shadow:0 16px 60px rgba(6,20,40,0.12);overflow:hidden;transform:translateY(20px);opacity:0;pointer-events:none;transition:all .26s}
    .cart-drawer.open{transform:translateY(0);opacity:1;pointer-events:auto}

    footer{margin-top:28px;text-align:center;color:var(--muted);font-size:13px}
    @media(max-width:980px){.hero{grid-template-columns:1fr}.grid{grid-template-columns:1fr}.checkout{grid-template-columns:1fr}.cart-drawer{left:12px;right:12px}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo"><div class="brandbox">NX</div><div style="line-height:1"><div style="font-weight:800">NexShop</div><div style="font-size:12px;color:var(--muted)">Demo • Keine Fremdmarken</div></div></div>
      <nav>
        <a href="#home">Home</a>
        <a href="#products">Produkte</a>
        <a href="#checkout">Bestellen</a>
        <a href="#support">Support</a>
        <button class="btn" id="open-checkout">Kasse</button>
        <button class="btn ghost" id="view-cart-btn">Warenkorb (<span id="cart-count">0</span>)</button>
      </nav>
    </header>

    <main>
      <section id="home" class="hero">
        <div>
          <div class="pill">Neu • NexPhone 6</div>
          <h2 style="margin-top:12px">Nex — moderne Geräte, faire Preise</h2>
          <p class="muted">Kompakte Produktseiten, Warenkorb, Checkout und eine PDF-Rechnung, alles innerhalb einer HTML-Datei. Platzhaltergrafiken — rechtlich unbedenklich.</p>

          <div style="display:flex;gap:18px;margin-top:14px">
            <div>
              <div style="font-size:12px;color:var(--muted)">NexPhone 6</div>
              <div style="font-weight:800;font-size:20px">149,99 €</div>
            </div>
            <div>
              <div style="font-size:12px;color:var(--muted)">NexPad 8</div>
              <div style="font-weight:800;font-size:20px">169,99 €</div>
            </div>
          </div>

          <div style="margin-top:18px">
            <button class="btn" id="shop-add-sample">NexPhone in Warenkorb</button>
          </div>
        </div>

        <div style="display:flex;align-items:center;justify-content:center">
          <!-- generischer SVG-Platzhalter (keine echten Produktbilder) -->
          <svg width="320" height="220" viewBox="0 0 320 220" xmlns="http://www.w3.org/2000/svg" aria-hidden>
            <rect width="320" height="220" rx="16" fill="#f6fbff"/>
            <g transform="translate(24,24)" fill="#0f172a">
              <rect x="0" y="0" width="80" height="160" rx="12" fill="#fff"/>
              <rect x="110" y="0" width="180" height="160" rx="12" fill="#fff"/>
            </g>
          </svg>
        </div>
      </section>

      <section id="products" class="grid" style="margin-top:18px">

        <article class="card" data-id="nexphone-6" data-price="149.99">
          <div class="thumb" aria-hidden>
            <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" rx="12" fill="#f3f9ff"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="11" fill="#2052a7">NexPhone 6</text></svg>
          </div>
          <div>
            <p class="title">NexPhone 6</p>
            <p class="desc">Kompakt, schnell und effizient.</p>
            <div class="price">149,99 €</div>
            <div style="margin-top:10px"><button class="btn" data-action="add">In den Warenkorb</button> <button class="btn ghost" data-action="details">Details</button></div>
          </div>
        </article>

        <article class="card" data-id="nexpad-8" data-price="169.99">
          <div class="thumb" aria-hidden>
            <svg width="100" height="100" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg"><rect width="100" height="100" rx="12" fill="#f7fff6"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" font-size="11" fill="#1a7a45">NexPad 8</text></svg>
          </div>
          <div>
            <p class="title">NexPad 8</p>
            <p class="desc">Leicht & leistungsfähig.</p>
            <div class="price">169,99 €</div>
            <div style="margin-top:10px"><button class="btn" data-action="add">In den Warenkorb</button> <button class="btn ghost" data-action="details">Details</button></div>
          </div>
        </article>

      </section>

      <!-- Checkout + Rechnungs-Tools -->
      <section id="checkout" class="checkout">
        <form id="address-form" class="form" aria-label="Lieferadresse">
          <h3>Lieferadresse</h3>
          <div class="muted">Fülle die Pflichtfelder aus. (Demo: keine Datenübertragung)</div>
          <label for="fname">Vorname *</label>
          <input id="fname" name="fname" type="text" required />
          <label for="lname">Nachname *</label>
          <input id="lname" name="lname" type="text" required />
          <label for="street">Straße, Nr. *</label>
          <input id="street" name="street" type="text" required />
          <label for="zip">PLZ *</label>
          <input id="zip" name="zip" type="text" required />
          <label for="city">Ort *</label>
          <input id="city" name="city" type="text" required />
          <label for="country">Land</label>
          <select id="country" name="country"><option>Deutschland</option><option>Österreich</option><option>Schweiz</option><option>Andere</option></select>
          <label for="email">E-Mail *</label>
          <input id="email" name="email" type="email" required />

          <div style="margin-top:12px;display:flex;gap:8px">
            <button type="button" class="btn" id="place-order">Bestellung prüfen</button>
            <button type="button" class="btn ghost" id="export-json">Exportiere Bestellung (JSON)</button>
            <button type="button" class="btn ghost" id="clear-cart">Warenkorb leeren</button>
          </div>

          <div style="margin-top:10px;font-size:13px;color:var(--muted)">Hinweis: Diese Demo speichert Bestelldaten lokal im Browser (LocalStorage) und sendet nichts an Server.</div>
        </form>

        <aside class="summary">
          <h3>Bestellübersicht</h3>
          <div id="summary-items" style="margin-top:12px"></div>
          <div style="display:flex;justify-content:space-between;margin-top:12px"><div class="muted">Zwischensumme</div><div id="subtotal">0,00 €</div></div>
          <div style="display:flex;justify-content:space-between;margin-top:6px"><div class="muted">Lieferung</div><div id="shipping">3,99 €</div></div>
          <div style="display:flex;justify-content:space-between;margin-top:12px;font-weight:800"><div>Gesamt</div><div id="grandtotal">0,00 €</div></div>

          <div style="margin-top:12px;display:flex;gap:8px">
            <button class="btn" id="download-invoice">Rechnung (PDF) herunterladen</button>
            <button class="btn ghost" id="print-invoice">Rechnung drucken</button>
          </div>

          <div style="margin-top:12px;font-size:13px;color:var(--muted)">PDF-Abrechnung erzeugt eine einfache Rechnung mit den Bestelldaten (Client-seitig).</div>
        </aside>
      </section>

      <section id="support" style="margin-top:18px">
        <div class="form">
          <h3>Support</h3>
          <p class="muted">Demo-Formular — sendet nichts.</p>
          <label for="msg">Nachricht</label>
          <textarea id="msg" style="width:100%;height:80px;border-radius:8px;border:1px solid rgba(10,15,30,0.06);padding:10px"></textarea>
          <div style="margin-top:10px"><button class="btn ghost">Absenden (Demo)</button></div>
        </div>
      </section>

    </main>

    <footer>© 2025 Nex Inc. — Demo-Website. Keine fremden Marken oder Produktfotos verwendet.</footer>
  </div>

  <!-- Cart Drawer -->
  <aside class="cart-drawer" id="cart-drawer" aria-hidden="true">
    <div style="padding:12px;border-bottom:1px solid rgba(10,15,30,0.04);display:flex;justify-content:space-between;align-items:center"><strong>Warenkorb</strong><button class="btn ghost" id="close-cart">Schließen</button></div>
    <div id="cart-items" style="padding:12px;max-height:320px;overflow:auto"></div>
    <div style="padding:12px;border-top:1px solid rgba(10,15,30,0.04);display:flex;justify-content:space-between;align-items:center"><div class="muted">Zwischensumme</div><div id="mini-sub">0,00 €</div></div>
    <div style="padding:12px;display:flex;gap:8px;justify-content:flex-end"><button class="btn" id="goto-checkout">Zur Kasse</button><button class="btn ghost" id="cart-clear">Leeren</button></div>
  </aside>

  <!-- jsPDF via CDN (für PDF-Generierung) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-LJwG7j7cQb2s6+OQ0rQ3z1xq6p4hFJZk7Z8Q5u6w8xq3a1P8xZQe7YlG9t2s0K1k3R+6Q==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    // Utilities
    const fmt = v => new Intl.NumberFormat('de-DE',{style:'currency',currency:'EUR'}).format(v);

    const PRODUCTS = [
      {id:'nexphone-6', name:'NexPhone 6', price:149.99},
      {id:'nexpad-8', name:'NexPad 8', price:169.99}
    ];
    const CART_KEY = 'nexshop_cart_v1';
    const SHIPPING = 3.99;

    function loadCart(){try{const r=localStorage.getItem(CART_KEY);return r?JSON.parse(r):[]}catch(e){return[]}}
    function saveCart(c){localStorage.setItem(CART_KEY,JSON.stringify(c));renderAll()}
    function cartAdd(id,qty=1){const c=loadCart();const it=c.find(x=>x.id===id);if(it)it.qty+=qty;else c.push({id,qty});saveCart(c)}
    function cartRemove(id){let c=loadCart();c=c.filter(x=>x.id!==id);saveCart(c)}
    function cartClear(){localStorage.removeItem(CART_KEY);renderAll()}

    function cartSummary(){const c=loadCart();let subtotal=0;const items=c.map(i=>{const p=PRODUCTS.find(x=>x.id===i.id);const line=p.price*i.qty;subtotal+=line;return{...p,qty:i.qty,lineTotal:line}});return{items,subtotal,shipping:items.length?SHIPPING:0,total:subtotal + (items.length?SHIPPING:0)}}

    // Render functions
    function renderAll(){
      const s=cartSummary();
      document.getElementById('cart-count').textContent = s.items.reduce((a,b)=>a+b.qty,0);
      document.getElementById('mini-sub').textContent = fmt(s.subtotal);
      document.getElementById('subtotal').textContent = fmt(s.subtotal);
      document.getElementById('shipping').textContent = s.items.length?fmt(s.shipping):fmt(0);
      document.getElementById('grandtotal').textContent = fmt(s.total);

      // Drawer
      const drawer=document.getElementById('cart-items');drawer.innerHTML='';
      s.items.forEach(it=>{
        const el=document.createElement('div');el.style.display='flex';el.style.justifyContent='space-between';el.style.padding='6px 0';el.style.alignItems='center';
        el.innerHTML=`<div><strong>${it.name}</strong><div class='muted' style='font-size:12px'>${it.qty} × ${fmt(it.price)}</div></div><div style='font-weight:800'>${fmt(it.lineTotal)}</div>`;
        el.addEventListener('click',()=>{if(confirm('Artikel entfernen?')){cartRemove(it.id)}});
        drawer.appendChild(el);
      });

      // Summary items
      const summ=document.getElementById('summary-items');summ.innerHTML='';
      s.items.forEach(it=>{const r=document.createElement('div');r.style.display='flex';r.style.justifyContent='space-between';r.style.marginTop='8px';r.innerHTML=`<div>${it.name} <span class='muted'>×${it.qty}</span></div><div>${fmt(it.lineTotal)}</div>`;summ.appendChild(r)});
    }

    // Add event listeners
    document.querySelectorAll('[data-action="add"]').forEach(btn=>btn.addEventListener('click',e=>{const card=e.target.closest('.card');cartAdd(card.dataset.id,1);}));
    document.getElementById('shop-add-sample').addEventListener('click',()=>{cartAdd('nexphone-6',1)});
    document.getElementById('view-cart-btn').addEventListener('click',()=>{document.getElementById('cart-drawer').classList.toggle('open')});
    document.getElementById('close-cart').addEventListener('click',()=>{document.getElementById('cart-drawer').classList.remove('open')});
    document.getElementById('goto-checkout').addEventListener('click',()=>{document.getElementById('cart-drawer').classList.remove('open');location.hash='checkout';window.scrollTo({top:700,behavior:'smooth'})});
    document.getElementById('cart-clear').addEventListener('click',cartClear);
    document.getElementById('clear-cart').addEventListener('click',cartClear);
    document.getElementById('open-checkout').addEventListener('click',()=>{location.hash='checkout';window.scrollTo({top:700,behavior:'smooth'})});

    // Order check -> show alert summary
    document.getElementById('place-order').addEventListener('click',()=>{
      const form=document.getElementById('address-form');if(!form.reportValidity())return;
      const s=cartSummary();if(s.items.length===0){alert('Warenkorb leer.');return}
      const data=collectOrderData();
      // show summary modal (simple alert in demo)
      let txt = `Bestellübersicht:\n\nKunde: ${data.address.fname} ${data.address.lname}\nAdresse: ${data.address.street}, ${data.address.zip} ${data.address.city}\nE-Mail: ${data.address.email}\n\nArtikel:\n`;
      txt += data.order.items.map(i=>` - ${i.name} ×${i.qty}: ${fmt(i.lineTotal)}`).join('\n');
      txt += `\n\nZwischensumme: ${fmt(data.order.subtotal)}\nLieferung: ${fmt(data.order.shipping)}\nGESAMT: ${fmt(data.order.total)}`;
      if(confirm(txt + '\n\nRechnung als PDF erzeugen?')){
        generateInvoicePdf(data);
      }
    });

    // Export JSON
    function collectOrderData(){const f=document.getElementById('address-form');const s=cartSummary();return{address:{fname:f.fname.value,lname:f.lname.value,street:f.street.value,zip:f.zip.value,city:f.city.value,country:f.country.value,email:f.email.value},order:s,createdAt:new Date().toISOString(),orderId:`NX-${Date.now()}`}};
    document.getElementById('export-json').addEventListener('click',()=>{
      const s=cartSummary();if(!s.items.length){alert('Warenkorb leer.');return}
      if(!document.getElementById('address-form').reportValidity())return;
      const data = collectOrderData();
      const blob = new Blob([JSON.stringify(data,null,2)],{type:'application/json'});
      const url = URL.createObjectURL(blob);const a=document.createElement('a');a.href=url;a.download=`order-${data.orderId}.json`;document.body.appendChild(a);a.click();a.remove();URL.revokeObjectURL(url);
    });

    // PDF / Print: using jsPDF
    async function generateInvoicePdf(data){
      try{
        const { jsPDF } = window.jspdf;
        const doc = new jsPDF({unit:'pt',format:'a4'});
        const left = 40; let y = 40;
        doc.setFontSize(18);doc.text('NexShop — Rechnung', left, y);y+=26;
        doc.setFontSize(11);doc.text(`Rechnungsnummer: ${data.orderId}`, left, y);doc.text(`Datum: ${new Date(data.createdAt).toLocaleString('de-DE')}`, 350, y);y+=18;
        doc.text('Rechnung an:', left, y);y+=14;doc.setFontSize(12);
        doc.text(`${data.address.fname} ${data.address.lname}`, left, y);y+=14;doc.text(`${data.address.street}`, left, y);y+=14;doc.text(`${data.address.zip} ${data.address.city}`, left, y);y+=22;

        // table h
